# Сервис сокращения ссылок на Go

Это простой бэкенд-сервис, написанный на Go, который позволяет сокращать длинные ссылки. Все данные хранятся в SQLite. Проект построен по понятной архитектуре с разделением на слои.

---

## Что умеет

- Создавать короткие ссылки через POST /shorten
- Переходить по коротким ссылкам через GET /{short_code}
- Обновлять длинные ссылки через PUT /update/{short_code}
- Удалять ссылки через DELETE /delete/{short_code}
- Если ссылка уже была, то вернёт старый код, а не создаст новый
- Если сгенерированный код уже есть — попробует сгенерировать снова
- Работает с CORS, можно использовать с фронтендом

---

## Структура проекта

- cmd/ — точка входа
- internal/app/ — инициализация приложения
- internal/deliveries/http/ — обработка HTTP-запросов
- internal/services/ — логика работы
- internal/repositories/ — работа с базой данных
- internal/usecases/shortner/ — описания моделей
- internal/pkg/utils/ — вспомогательные функции

---

## Как запустить

Нужно установить Go 1.18 или выше и Git.

1. Клонируй репозиторий:

--git clone <your-repo-url>
--cd <your-repo-directory>


2. Установи зависимости:

--go mod tidy


3. Запусти проект:

--go run ./cmd/main.go


Или собери бинарник и запусти:

--go build -o shortener ./cmd/main.go
./shortener


Настройки задаются через переменные окружения:
- PORT — порт сервера (по умолчанию 8080)
- DB_PATH — путь к базе данных (по умолчанию ./data/shortener.db)
- BASE_URL — базовый адрес для формирования короткой ссылки (по умолчанию http://localhost:8080)

---

## API

### POST /shorten
Создаёт короткую ссылку.

Пример запроса:
{
  "url": "https://example.com"
}


Пример ответа:

{
  "short_url": "http://localhost:8080/abc123",
  "original_url": "https://example.com"
}


---

### GET /{short_code}
Перенаправляет на оригинальную ссылку.
Ответ: 302 Found.

---

### PUT /update/{short_code}
Обновляет ссылку.

Пример запроса:

{
  "new_url": "https://new-example.com"
}


Пример ответа:

{
  "message": "URL updated successfully"
}


---

### DELETE /delete/{short_code}
Удаляет ссылку. Ответ: 204 No Content.

---

### GET /
Показывает, что сервис работает. Ответ: 200 OK.


